# One-Pager: Система прогнозирования оттока клиентов

## Бизнес-проблема
Компании теряют доход из-за ухода клиентов. Своевременное прогнозирование оттока позволяет заранее выявлять пользователей с высоким риском и принимать меры по их удержанию. Цель сервиса — давать простое и понятное предсказание, которое может быть интегрировано в бизнес-процессы.

Для построения модели используется историческая информация о поведении клиентов: частота покупок, суммы чеков, время от последней активности, пользование сервисами. В демо-версии используются упрощённые числовые признаки (4 признака), чтобы продемонстрировать работу сервиса и MLOps-пайплайна.

## ML-модель
Базовая модель — логистическая регрессия, обученная оффлайн на подготовленных данных. Модель предсказывает вероятность оттока и классифицирует клиентов на два класса. Переобучение модели запускается периодически с помощью Airflow. В дальнейшем модель может быть заменена на более сложные алгоритмы (градиентный бустинг, нейронные сети).

## Архитектура сервиса
- **ML-сервис** на FastAPI обрабатывает запросы на предсказание, выполняет inference внутри контейнера и сохраняет результаты в базу данных.
- **База данных PostgreSQL** хранит результаты предсказаний, признаки и метаданные.
- **Брокер сообщений Kafka** подготовлен в инфраструктуре для возможного расширения асинхронных и real-time пайплайнов.
- **Оркестратор Airflow** выполняет переобучение модели по расписанию и управляет оффлайн-процессами.
- **Веб-интерфейс Streamlit** позволяет пользователю ввести значения признаков, получить результат и просмотреть историю предсказаний.
- **Мониторинг Grafana + Prometheus** отображает технические метрики сервиса (количество запросов, время отклика) и базовые бизнес-метрики.

## Метрики
Ключевые метрики качества модели: Accuracy, Precision, Recall и AUC-ROC. Бизнес-метрики включают долю клиентов с высоким риском и потенциальное снижение фактического оттока. В демо-версии реализован сбор технических метрик и сохранение истории предсказаний в базу данных.

## План развития
- Добавить новые признаки и более точные модели.
- Реализовать автоматический выбор порога классификации и уведомления для менеджеров.
- Расширить мониторинг, добавить алертинг и централизованное логирование.
- Подключить реальные данные из CRM или транзакционных систем.
- Реализовать A/B-тестирование для оценки эффективности стратегий удержания.
